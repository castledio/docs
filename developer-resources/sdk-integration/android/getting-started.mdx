---
title: "Getting Started with Android SDK"
sidebarTitle: "Getting Started"
---

<Info>

**Prerequisites**

- [Castled CEP account is already setup](/account-management/user-signup)

</Info>

The Castled Android SDK enables mobile applications running on Android devices to receive push and in-app notifications originating from the Castled Customer Engagement Platform.
The steps outlined below will assist your Android app developers in integrating the SDK with your mobile application

## SDK installation

<Tabs>
  <Tab title="Gradle">
    Applicable if your project uses **Gradle** for managing dependency. Add `castled-notifications` as a dependency in the `build.gradle` file of your Android application module.

    ```groovy build.gradle
        ...
        dependencies {
            ...
            implementation 'io.castled.android:castled-notifications:<sdk-latest-version>'
        }
    ````

    Replace `latest-version` with the latest version number of the SDK found here. Sync the gradle file to pull the dependencies just added.

</Tab>

<Tab title="Maven">

    Applicable if your project uses **Maven** for managing dependency. Add the following snippet in your module `pom.xml` file as a child of `dependencies`

    ```xml pom.xml
        <dependency>
            <groupId>io.castled.android</groupId>
            <artifactId>castled-notifications</artifactId>
            <version>sdk-latest-version</version>
        </dependency>
    ```

    Replace `sdk-latest-version` with the latest version of the sdk.

</Tab>

</Tabs>

## SDK initialization

The next step is to initialize the SDK. Initialization is typically done in the `onCreate` method of your
`Application` class as follows.

```kotlin MyApplicationClass.kt
class MyApplicationClass : MultiDexApplication() {
    override fun onCreate() {
        super.onCreate()

        // SDK initialization
        CastledNotifications.initialize(
            this, CastledConfigs.Builder()
                .apiKey("<api-key>")
                .location(<location>)
                .build()
        )
        ...
    }
    ...
}
```

`api-key` is a unique key associated with your Castled account. It can be found in the Castled dashboard at **Settings > Api Keys**. `location` is the region where you have your Castled account.
Currently we offer services in 4 regions

```kotlin CastledConfigs.kt
    enum class CastledLocation {
        US,   // United States
        EU,   // Europe
        IN,   // India
        AP    // Asia Pacific
    }
```

### User Identification

To identify the user associated with this app instance, use the following method. This is typically invoked immediately after user completes the
sign-in flow of your app. `user-id` is the id that you use internally within your organisation to identify a user.

```kotlin

// User identification
CastledNotifications.setUserId(this, "<user-id>", this::onSuccess, this::onError)
```

`onSuccess` and `onError` are optional callbacks you can get implement to get notified of the status of the identify process. Sample implementation below.

```kotlin

private fun onSuccess() {
    Log.d("MyApp","Castled user identify completed successfully")
}

private fun onError(e: Exception) {
    Log.e("MyApp", "Castled user identify failed!", e)
}
```

<Note>
  The `user-id` field can, optionally, be an encrypted value created using the
  Castled `app-secret`. It is recommended to perform this encryption in trusted
  environments, such as your app server, to mitigate risks of user
  impersonation. When implementing an encrypted `user-id`, make sure to set the
  `enableUserIdEncryption` configuration to `true` during SDK initialization. By
  default, this configuration is set to `false`.
</Note>

## SDK Permissions

By default `AndroidManifest.xml` of the SDK includes the following permission requests. No developer action is required here.

```xml

<!-- Castled SDK needs this permission to sync user token and campaign events  -->
<uses-permission android:name="android.permission.INTERNET"/>
<!-- Castled SDK will use this permission to decide when to make network calls -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
```
